101.43.151.8/50100



现在可用的账号

| 账号         | 密码     | 备注                   |
| ------------ | -------- | ---------------------- |
| admin        | password | 最高权限，尽量别用这个 |
| PayrollAdmin | 123456   | 工资管理员权限         |
| Adam         | 000000   | 普通员工               |
| Adam1        | 000000   | 普通员工               |

*所有普通员工的默认密码都是000000，暂时没有修改密码。

*普通员工的账号就是ename

## 登录 /login

权限要求：无

类型：POST

返回数据中的token请妥善保存，并在请求头的Authorization字段中以【'Bearer ' + Token】的形式携带，这是判断登录和识别用户的依据。

参数(Data):

| **参数名** | **类型** | **含义** | 约束 | **备注** |
| ---------- | -------- | -------- | ---- | -------- |
| username   | 字符串   | 登录名   |      |          |
| password   | 字符串   | 密码     |      |          |

## **权限确认/登录状态确认/Token**

需要确认权限的api，比如需要登录的，请在请求头中带上token以进行识别。

token过一段时间会失效，所以请准备好如果失效就跳转到登录界面的逻辑。

### **token的来源**

/login接口的返回数据的token字段。请务必在本地保存好token。

/login接口的response：

![img1](https://github.com/Somaur/MD/blob/main/img/img1.png)

### **使用token**

请务必在本地保存好token，并在请求头的Authorization字段中携带。

格式要求：

Bearer + 空格 + token

携带的效果：

![img2](https://github.com/Somaur/MD/blob/main/img/img2.png)

参考前端代码（如果使用axios包）：

```javascript
axios({
  method: 'get',
  url: url,
  headers: { 'Authorization': 'Bearer ' + getToken() }
})
```

## 查询系列 GET

### **查询员工信息**（列表/分页） `/employee/employee/list`

权限要求：工资管理员

类型：GET

参数：

| **参数名** | **类型** | **含义** | 约束 | **备注** |
| ---------- | -------- | -------- | ---- | -------- |
| PAGE_NUM   | 数字     | 当前页数 | 可空 | 默认为1  |
| PAGE_SIZE  | 数字     | 每页容量 | 可空 | 默认为10 |

返回值：

| **参数名**     | **类型**        | **含义**   | 约束           | **备注**      |
| -------------- | --------------- | ---------- | -------------- | ------------- |
| ename          | 字符串          |            | 不能以数字结尾 |               |
| type           | 字符串（长度1） |            | 只能是H/S/C    |               |
| address        | 字符串          |            |                |               |
| ssn            | 字符串          | 社会安全码 | 九位字母数字   |               |
| phone          | 字符串          |            |                |               |
| taxRate        | 定点小数[1].[4] |            | [0,1)          |               |
| hourSalary     | 定点小数[8].[2] |            | 在容量以内     | 仅当H时有值   |
| salary         | 定点小数[8].[2] |            | 在容量以内     | 仅当S/C时有值 |
| commissionRate | 定点小数[1].[4] |            | [0,1)          | 仅当C时有值   |
| dayHourLimit   | 整数            |            | [0,24]         |               |
| weekHourLimit  | 整数            |            | [0,50]         |               |
| vacation       | 整数            |            | [0,200]        |               |
| payMethod      | 字符串（长度1） |            | 只能是A/B/C    |               |
| payMailAddr    | 字符串          |            |                | 仅当B时有值   |
| payBank        | 字符串          |            |                | 仅当C时有值   |
| payAccount     | 字符串          |            |                | 仅当C时有值   |

### **查询员工信息**（单项） `/employee/employee/{ename}`

权限要求：工资管理员

类型：GET

### 获取可用projectID `/project/list`

权限要求：登录

类型：GET

返回值：JsonArray，每个元素是ID字符串

### 查询某个projectID是否可用 `/project/exist/{pid}`

权限要求：登录

类型：GET

### 获取可用productID（订单商品ID） `/product/list`

权限要求：登录

类型：GET

### 查询某个product的价格 `/product/price/{pid}`

权限要求：登录

类型：GET

### 查询工资发放记录（用来打印报表）`/admin/info/payLog`

权限要求：

- 管理员（查询参数需要带上ename）
- 普通员工（查询参数可以不带ename，如果带了一定要和自己的ename相同）

类型：GET

参数：

| **参数名** | **类型** | **含义** | 约束       | **备注**                   |
| ---------- | -------- | -------- | ---------- | -------------------------- |
| ename      | 字符串   | 员工ID   | 见权限要求 | 普通员工默认为自己         |
| startDate  | 字符串   | 开始日期 |            | yyyy-MM-dd格式             |
| endDate    | 字符串   | 结束日期 | 可空       | yyyy-MM-dd格式，默认为今天 |

### 查询一段时间内的总工时（用来打印报表) `/admin/info/workHour`

权限要求：

- 管理员（查询参数需要带上ename）
- 普通员工（查询参数可以不带ename，如果带了一定要和自己的ename相同）

类型：GET

参数：

| **参数名** | **类型** | **含义** | 约束       | **备注**                   |
| ---------- | -------- | -------- | ---------- | -------------------------- |
| ename      | 字符串   | 员工ID   | 见权限要求 | 普通员工默认为自己         |
| startDate  | 字符串   | 开始日期 |            | yyyy-MM-dd格式             |
| endDate    | 字符串   | 结束日期 | 可空       | yyyy-MM-dd格式，默认为今天 |

返回值里的data是查询到的总工时

### 查询一段时间内+特定项目的总工时（用来打印报表） `/admin/info/projectWorkHour`

权限要求：

- 管理员（查询参数需要带上ename）
- 普通员工（查询参数可以不带ename，如果带了一定要和自己的ename相同）

类型：GET

参数：

| **参数名** | **类型** | **含义** | 约束       | **备注**                   |
| ---------- | -------- | -------- | ---------- | -------------------------- |
| ename      | 字符串   | 员工ID   | 见权限要求 | 普通员工默认为自己         |
| pid        | 字符串   | 项目ID   |            |                            |
| startDate  | 字符串   | 开始日期 |            | yyyy-MM-dd格式             |
| endDate    | 字符串   | 结束日期 | 可空       | yyyy-MM-dd格式，默认为今天 |

返回值里的data是查询到的总工时

### 查询假期（用来打印报表） 

这个系统没展开写，使用单个Employee查询里面的vacation字段即可。

### 查询单个员工(Employee)信息 `admin/info/employee/ename/{ename}`

权限要求：

- 管理员（任意查询）
- 普通员工（只能查自己）

类型：GET

| **参数名** | **类型** | **含义** | 约束 | **备注** |
| ---------- | -------- | -------- | ---- | -------- |
| ename      | 字符串   | 员工ID   | 必填 |          |
